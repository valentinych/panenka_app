{% extends "base.html" %}
{% block title %}Lobby {{ code }} · Panenka Live{% endblock %}
{% block content %}
<section
  class="card buzzer-card"
  data-buzzer
  data-role="host"
  data-state-url="{{ url_for('main.buzzer_state', code=code) }}"
  data-lock-url="{{ url_for('main.buzzer_lock', code=code) }}"
  data-reset-url="{{ url_for('main.buzzer_reset', code=code) }}"
  data-close-url="{{ url_for('main.buzzer_close', code=code) }}"
  data-value-url="{{ url_for('main.buzzer_set_value', code=code) }}"
  data-confirm-url="{{ url_for('main.buzzer_confirm', code=code) }}"
  data-resolve-url="{{ url_for('main.buzzer_resolve', code=code) }}"
  data-leave-redirect="{{ url_for('main.buzzer_home') }}"
>
  <header class="buzzer-header">
    <div>
      <p class="helper-text">Hosting as {{ host_name }}</p>
      <h2 class="card-title">Lobby {{ code }}</h2>
    </div>
    <span class="status-pill" data-lock-indicator>Buzzers open</span>
  </header>
  <section class="scoreboard" data-scoreboard>
    <header class="scoreboard__header">
      <h3>Счёт</h3>
      <div class="scoreboard__info">
        <span>Номинал: <strong data-question-value>0</strong></span>
        <span>Игрок: <strong data-active-player>—</strong></span>
      </div>
    </header>
    <p class="helper-text" data-empty-scoreboard>Пока нет игроков.</p>
    <ul class="scoreboard__list" data-score-list></ul>
  </section>
  <div class="buzzer-share">
    <p class="card-description">
      Share the code <span class="status-pill status-pill--muted">{{ code }}</span> or send this link to players:
      <code class="share-link">{{ share_url }}</code>
    </p>
    <p class="helper-text">
      Need to reopen this lobby later? Bookmark your host link:
      <code class="share-link">{{ host_manage_url }}</code>
    </p>
  </div>
  <div class="buzzer-actions">
    <button class="btn-primary" type="button" data-lock-button>Lock buzzers</button>
    <button class="btn-secondary" type="button" data-reset-button>Reset buzzers</button>
    <button class="btn-tertiary" type="button" data-close-button>Close lobby</button>
  </div>
  <section class="buzzer-section">
    <h3>Управление вопросом</h3>
    <div class="value-picker" data-value-picker>
      <p class="field-label">Номинал вопроса</p>
      <div class="value-picker__buttons">
        {% for value in (10, 20, 30, 40, 50) %}
        <button
          class="value-button"
          type="button"
          data-value-button="{{ value }}"
        >{{ value }}</button>
        {% endfor %}
      </div>
    </div>
    <div class="answer-controls" data-answer-controls>
      <p class="helper-text">Активный игрок: <strong data-active-player>—</strong></p>
      <div class="answer-buttons">
        <button class="btn-score" type="button" data-resolve-action="plus">+</button>
        <button class="btn-score" type="button" data-resolve-action="minus">-</button>
        <button class="btn-score" type="button" data-resolve-action="skip">SKIP</button>
      </div>
    </div>
  </section>
  <div class="buzzer-sections">
    <section class="buzzer-section">
      <h3>Buzz queue</h3>
      <p class="helper-text" data-empty-queue>Waiting for the first buzz...</p>
      <ol class="buzz-queue" data-queue></ol>
    </section>
    <section class="buzzer-section">
      <h3>Players</h3>
      <p class="helper-text" data-empty-roster>No players yet.</p>
      <ul class="buzzer-roster" data-roster></ul>
    </section>
  </div>
</section>
{% endblock %}
{% block extra_scripts %}
  <script src="{{ url_for('static', filename='buzzer.js') }}" defer></script>
{% endblock %}
